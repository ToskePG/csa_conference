/*!
 * jQuery Nivo Slider v2.6
 * http://nivo.dev7studios.com
 *
 * Copyright 2011, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * March 2010
 */
(function(b){var a=function(c,d){var x=b.extend({},b.fn.nivoSlider.defaults,d);var e=false;var q="";b(c).each(function(){q+="#"+this.id+" a {display: block;}"});b("style","head").each(function(){if(b(this).text().match(/\.nivoSlider/i)){e=true;b(this).append(q);return false}});if(!e){var j=".nivoSlider{position:relative;}.nivoSlider img{position:absolute;top:0;left:0;}.nivoSlider a.nivo-imageLink{position:absolute;top:0;left:0;width:100%;height:100%;border:0;padding:0;margin:0;z-index:60;display:none;}.nivo-slice{display:block;position:absolute;z-index:50;height:100%;}.nivo-box{display:block;position:absolute;z-index:5;}.nivo-caption{position:absolute;left:0;bottom:0;background:#000;color:#fff;opacity:0.8;width:100%;z-index:89;}.nivo-caption p {padding:5px;margin:0;}";b('<style type="text/css">'+j+q+"</style>").appendTo("head")}var o={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};var r=b(c);r.data("nivo:vars",o);r.css("position","relative");r.addClass("nivoSlider");var p=r.children();p.each(function(){var A=b(this);var z="";if(!A.is("img")){if(A.is("a")){A.addClass("nivo-imageLink");z=A}A=A.find("img:first")}var y=A.width();if(y==0){y=A.attr("width")}var i=A.height();if(i==0){i=A.attr("height")}if(y>r.width()){r.width(y)}if(i>r.height()){r.height(i)}if(z!=""){z.css("display","none")}A.css("display","none");o.totalSlides++});if(x.startSlide>0){if(x.startSlide>=o.totalSlides){x.startSlide=o.totalSlides-1}o.currentSlide=x.startSlide}if(b(p[o.currentSlide]).is("img")){o.currentImage=b(p[o.currentSlide])}else{o.currentImage=b(p[o.currentSlide]).find("img:first")}if(b(p[o.currentSlide]).is("a")){b(p[o.currentSlide]).css("display","block")}r.css("background","url("+encodeURI(o.currentImage.attr("src"))+") no-repeat");r.append(b('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:x.captionOpacity,"font-family":x.captionFontFamily,"font-size":x.captionFontSize,color:x.captionTextColor,"background-color":x.captionBackground,"line-height":"100%"}));b(".nivo-caption p",r).css("padding",x.captionPadding);var n=function(i){var z=b(".nivo-caption",r);if(i.showCaption&&o.currentImage.attr("alt")!=""&&o.currentImage.attr("alt")!=undefined){var y=o.currentImage.attr("alt");if(y.substr(0,1)=="#"){y=b(y).html()}if(z.css("display")=="block"){z.find("p").fadeOut(i.animSpeed,function(){b(this).html(y);b(this).fadeIn(i.animSpeed)})}else{z.find("p").html(y)}z.fadeIn(i.animSpeed)}else{z.fadeOut(i.animSpeed)}};n(x);var m=0;if(!x.manualAdvance&&p.length>1){m=setInterval(function(){l(r,p,x,false)},x.pauseTime)}if(x.directionNav){var k=b("#"+x.prevId).css("cursor","pointer");var t=b("#"+x.nextId).css("cursor","pointer");k.live("click",function(){if(o.running){return false}clearInterval(m);m="";o.currentSlide-=2;l(r,p,x,"prev")});t.live("click",function(){if(o.running){return false}clearInterval(m);m="";l(r,p,x,"next")})}if(x.controlNav){var f=b('<div class="nivo-controlNav"></div>');r.append(f);for(var v=0;v<p.length;v++){if(x.controlNavThumbs){var h=p.eq(v);if(!h.is("img")){h=h.find("img:first")}if(x.controlNavThumbsFromRel){f.append('<a class="nivo-control" rel="'+v+'"><img src="'+h.attr("rel")+'" alt="" /></a>')}else{f.append('<a class="nivo-control" rel="'+v+'"><img src="'+h.attr("src").replace(x.controlNavThumbsSearch,x.controlNavThumbsReplace)+'" alt="" /></a>')}}else{f.append('<a class="nivo-control" rel="'+v+'">'+(v+1)+"</a>")}}b(".nivo-controlNav a:eq("+o.currentSlide+")",r).addClass("active");b(".nivo-controlNav a",r).live("click",function(){if(o.running){return false}if(b(this).hasClass("active")){return false}clearInterval(m);m="";r.css("background","url("+encodeURI(o.currentImage.attr("src"))+") no-repeat");o.currentSlide=b(this).attr("rel")-1;l(r,p,x,"control")})}if(x.keyboardNav){b(window).keypress(function(i){if(i.keyCode=="37"){if(o.running){return false}clearInterval(m);m="";o.currentSlide-=2;l(r,p,x,"prev")}if(i.keyCode=="39"){if(o.running){return false}clearInterval(m);m="";l(r,p,x,"next")}})}if(x.pauseOnHover){r.hover(function(){o.paused=true;clearInterval(m);m=""},function(){o.paused=false;if(m==""&&!x.manualAdvance){m=setInterval(function(){l(r,p,x,false)},x.pauseTime)}})}r.bind("nivo:animFinished",function(){o.running=false;b(p).each(function(){if(b(this).is("a")){b(this).css("display","none")}});if(b(p[o.currentSlide]).is("a")){b(p[o.currentSlide]).css("display","block")}if(m==""&&!o.paused&&!x.manualAdvance){m=setInterval(function(){l(r,p,x,false)},x.pauseTime)}x.afterChange.call(this)});var w=function(A,z,C){for(var y=0;y<z.slices;y++){var B=Math.round(A.width()/z.slices);if(y==z.slices-1){A.append(b('<div class="nivo-slice"></div>').css({left:(B*y)+"px",width:(A.width()-(B*y))+"px",height:"0px",opacity:"0",background:"url("+encodeURI(C.currentImage.attr("src"))+") no-repeat -"+((B+(y*B))-B)+"px 0%"}))}else{A.append(b('<div class="nivo-slice"></div>').css({left:(B*y)+"px",width:B+"px",height:"0px",opacity:"0",background:"url("+encodeURI(C.currentImage.attr("src"))+") no-repeat -"+((B+(y*B))-B)+"px 0%"}))}}};var s=function(z,i,C){var y=Math.round(z.width()/i.boxCols);var D=Math.round(z.height()/i.boxRows);for(var A=0;A<i.boxRows;A++){for(var B=0;B<i.boxCols;B++){if(B==i.boxCols-1){z.append(b('<div class="nivo-box"></div>').css({opacity:0,left:(y*B)+"px",top:(D*A)+"px",width:(z.width()-(y*B))+"px",height:D+"px",background:"url("+encodeURI(C.currentImage.attr("src"))+") no-repeat -"+((y+(B*y))-y)+"px -"+((D+(A*D))-D)+"px"}))}else{z.append(b('<div class="nivo-box"></div>').css({opacity:0,left:(y*B)+"px",top:(D*A)+"px",width:y+"px",height:D+"px",background:"url("+encodeURI(C.currentImage.attr("src"))+") no-repeat -"+((y+(B*y))-y)+"px -"+((D+(A*D))-D)+"px"}))}}}};var l=function(L,K,O,H){var J=L.data("nivo:vars");if(J&&(J.currentSlide==J.totalSlides-1)){O.lastSlide.call(this)}if((!J||J.stop)&&!H){return false}O.beforeChange.call(this);if(!H){L.css("background","url("+encodeURI(J.currentImage.attr("src"))+") no-repeat")}else{if(H=="prev"){L.css("background","url("+encodeURI(J.currentImage.attr("src"))+") no-repeat")}if(H=="next"){L.css("background","url("+encodeURI(J.currentImage.attr("src"))+") no-repeat")}}J.currentSlide++;if(J.currentSlide==J.totalSlides){J.currentSlide=0;O.slideshowEnd.call(this)}if(J.currentSlide<0){J.currentSlide=(J.totalSlides-1)}if(b(K[J.currentSlide]).is("img")){J.currentImage=b(K[J.currentSlide])}else{J.currentImage=b(K[J.currentSlide]).find("img:first")}if(O.controlNav){b(".nivo-controlNav a",L).removeClass("active");b(".nivo-controlNav a:eq("+J.currentSlide+")",L).addClass("active")}n(O);b(".nivo-slice",L).remove();b(".nivo-box",L).remove();if(O.effect=="random"){var Q=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");J.randAnim=Q[Math.floor(Math.random()*(Q.length+1))];if(J.randAnim==undefined){J.randAnim="fade"}}if(O.effect.indexOf(",")!=-1){var Q=O.effect.split(",");J.randAnim=Q[Math.floor(Math.random()*(Q.length))];if(J.randAnim==undefined){J.randAnim="fade"}}J.running=true;if(O.effect=="sliceDown"||O.effect=="sliceDownRight"||J.randAnim=="sliceDownRight"||O.effect=="sliceDownLeft"||J.randAnim=="sliceDownLeft"){w(L,O,J);var P=0;var M=0;var y=b(".nivo-slice",L);if(O.effect=="sliceDownLeft"||J.randAnim=="sliceDownLeft"){y=b(".nivo-slice",L)._reverse()}y.each(function(){var i=b(this);i.css({top:"0px"});if(M==O.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){L.trigger("nivo:animFinished")})},(100+P))}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},O.animSpeed)},(100+P))}P+=50;M++})}else{if(O.effect=="sliceUp"||O.effect=="sliceUpRight"||J.randAnim=="sliceUpRight"||O.effect=="sliceUpLeft"||J.randAnim=="sliceUpLeft"){w(L,O,J);var P=0;var M=0;var y=b(".nivo-slice",L);if(O.effect=="sliceUpLeft"||J.randAnim=="sliceUpLeft"){y=b(".nivo-slice",L)._reverse()}y.each(function(){var i=b(this);i.css({bottom:"0px"});if(M==O.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){L.trigger("nivo:animFinished")})},(100+P))}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},O.animSpeed)},(100+P))}P+=50;M++})}else{if(O.effect=="sliceUpDown"||O.effect=="sliceUpDownRight"||J.randAnim=="sliceUpDown"||O.effect=="sliceUpDownLeft"||J.randAnim=="sliceUpDownLeft"){w(L,O,J);var P=0;var M=0;var F=0;var y=b(".nivo-slice",L);if(O.effect=="sliceUpDownLeft"||J.randAnim=="sliceUpDownLeft"){y=b(".nivo-slice",L)._reverse()}y.each(function(){var i=b(this);if(M==0){i.css("top","0px");M++}else{i.css("bottom","0px");M=0}if(F==O.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){L.trigger("nivo:animFinished")})},(100+P))}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},O.animSpeed)},(100+P))}P+=50;F++})}else{if(O.effect=="fold"||J.randAnim=="fold"){w(L,O,J);var P=0;var M=0;b(".nivo-slice",L).each(function(){var i=b(this);var R=i.width();i.css({top:"0px",height:"100%",width:"0px"});if(M==O.slices-1){setTimeout(function(){i.animate({width:R,opacity:"1.0"},O.animSpeed,"",function(){L.trigger("nivo:animFinished")})},(100+P))}else{setTimeout(function(){i.animate({width:R,opacity:"1.0"},O.animSpeed)},(100+P))}P+=50;M++})}else{if(O.effect=="fade"||J.randAnim=="fade"){w(L,O,J);var D=b(".nivo-slice:first",L);D.css({height:"100%",width:L.width()+"px"});D.animate({opacity:"1.0"},(O.animSpeed*2),"",function(){L.trigger("nivo:animFinished")})}else{if(O.effect=="slideInRight"||J.randAnim=="slideInRight"){w(L,O,J);var D=b(".nivo-slice:first",L);D.css({height:"100%",width:"0px",opacity:"1"});D.animate({width:L.width()+"px"},(O.animSpeed*2),"",function(){L.trigger("nivo:animFinished")})}else{if(O.effect=="slideInLeft"||J.randAnim=="slideInLeft"){w(L,O,J);var D=b(".nivo-slice:first",L);D.css({height:"100%",width:"0px",opacity:"1",left:"",right:"0px"});D.animate({width:L.width()+"px"},(O.animSpeed*2),"",function(){D.css({left:"0px",right:""});L.trigger("nivo:animFinished")})}else{if(O.effect=="boxRandom"||J.randAnim=="boxRandom"){s(L,O,J);var N=O.boxCols*O.boxRows;var M=0;var P=0;var A=g(b(".nivo-box",L));A.each(function(){var i=b(this);if(M==N-1){setTimeout(function(){i.animate({opacity:"1"},O.animSpeed,"",function(){L.trigger("nivo:animFinished")})},(100+P))}else{setTimeout(function(){i.animate({opacity:"1"},O.animSpeed)},(100+P))}P+=20;M++})}else{if(O.effect=="boxRain"||J.randAnim=="boxRain"||O.effect=="boxRainReverse"||J.randAnim=="boxRainReverse"||O.effect=="boxRainGrow"||J.randAnim=="boxRainGrow"||O.effect=="boxRainGrowReverse"||J.randAnim=="boxRainGrowReverse"){s(L,O,J);var N=O.boxCols*O.boxRows;var M=0;var P=0;var C=0;var I=0;var G=new Array();G[C]=new Array();var A=b(".nivo-box",L);if(O.effect=="boxRainReverse"||J.randAnim=="boxRainReverse"||O.effect=="boxRainGrowReverse"||J.randAnim=="boxRainGrowReverse"){A=b(".nivo-box",L)._reverse()}A.each(function(){G[C][I]=b(this);I++;if(I==O.boxCols){C++;I=0;G[C]=new Array()}});for(var E=0;E<(O.boxCols*2);E++){var z=E;for(var B=0;B<O.boxRows;B++){if(z>=0&&z<O.boxCols){(function(X,S,W,T,Y){var V=b(G[X][S]);var R=V.width();var U=V.height();if(O.effect=="boxRainGrow"||J.randAnim=="boxRainGrow"||O.effect=="boxRainGrowReverse"||J.randAnim=="boxRainGrowReverse"){V.width(0).height(0)}if(T==Y-1){setTimeout(function(){V.animate({opacity:"1",width:R,height:U},O.animSpeed/1.3,"",function(){L.trigger("nivo:animFinished")})},(100+W))}else{setTimeout(function(){V.animate({opacity:"1",width:R,height:U},O.animSpeed/1.3)},(100+W))}})(B,z,P,M,N);M++}z--}P+=100}}}}}}}}}}};var g=function(z){for(var A,y,B=z.length;B;A=parseInt(Math.random()*B),y=z[--B],z[B]=z[A],z[A]=y){}return z};var u=function(i){if(this.console&&typeof console.log!="undefined"){console.log(i)}};this.stop=function(){if(!b(c).data("nivo:vars").stop){b(c).data("nivo:vars").stop=true;u("Stop Slider")}};this.start=function(){if(b(c).data("nivo:vars").stop){b(c).data("nivo:vars").stop=false;u("Start Slider")}};x.afterLoad.call(this);return this};b.fn.nivoSlider=function(c){return this.each(function(e,g){var d=b(this);if(d.data("nivoslider")){return d.data("nivoslider")}var f=new a(this,c);d.data("nivoslider",f)})};b.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:false,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:true,pauseOnHover:true,manualAdvance:false,showCaption:false,captionFontFamily:"",captionFontSize:"",captionBackground:"#000",captionTextColor:"#fff",captionOpacity:0.8,captionPadding:"5px",prevId:"",nextId:"",prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};b.fn._reverse=[].reverse})(jQuery);